{"version":3,"sources":["resources/assets/general/js/routes.js"],"names":["laroute","getHtmlLink","url","title","attributes","attrs","key","hasOwnProperty","push","join","getLinkAttributes","routes","absolute","rootUrl","prefix","route","name","parameters","this","getByName","toRoute","uri","getCorrectUrl","replaceNamedParameters","qs","getRouteQueryString","replace","match","value","length","getByAction","action","link_to","link_to_route","link_to_action","set_absolute","set_root_url","set_routes","json","set_prefix","call","define","amd","module","exports","window"],"mappings":"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","file":"routes.min.js","sourcesContent":["(function () {\r\n\r\n    var laroute = (function () {\r\n\r\n        var routes = {\r\n\r\n            absolute: false,\r\n            rootUrl: '',\r\n            routes : [],\r\n            prefix: '',\r\n\r\n            route : function (name, parameters, route) {\r\n                route = route || this.getByName(name);\r\n\r\n                if ( ! route ) {\r\n                    return undefined;\r\n                }\r\n\r\n                return this.toRoute(route, parameters);\r\n            },\r\n\r\n            url: function (url, parameters) {\r\n                parameters = parameters || [];\r\n\r\n                var uri = url + '/' + parameters.join('/');\r\n\r\n                return this.getCorrectUrl(uri);\r\n            },\r\n\r\n            toRoute : function (route, parameters) {\r\n                var uri = this.replaceNamedParameters(route.uri, parameters);\r\n                var qs  = this.getRouteQueryString(parameters);\r\n\r\n                return this.getCorrectUrl(uri + qs);\r\n            },\r\n\r\n            replaceNamedParameters : function (uri, parameters) {\r\n                uri = uri.replace(/\\{(.*?)\\??\\}/g, function(match, key) {\r\n                    if (parameters.hasOwnProperty(key)) {\r\n                        var value = parameters[key];\r\n                        delete parameters[key];\r\n                        return value;\r\n                    } else {\r\n                        return match;\r\n                    }\r\n                });\r\n\r\n                // Strip out any optional parameters that were not given\r\n                uri = uri.replace(/\\/\\{.*?\\?\\}/g, '');\r\n\r\n                return uri;\r\n            },\r\n\r\n            getRouteQueryString : function (parameters) {\r\n                var qs = [];\r\n                for (var key in parameters) {\r\n                    if (parameters.hasOwnProperty(key)) {\r\n                        qs.push(key + '=' + parameters[key]);\r\n                    }\r\n                }\r\n\r\n                if (qs.length < 1) {\r\n                    return '';\r\n                }\r\n\r\n                return '?' + qs.join('&');\r\n            },\r\n\r\n            getByName : function (name) {\r\n                for (var key in this.routes) {\r\n                    if (this.routes.hasOwnProperty(key) && this.routes[key].name === name) {\r\n                        return this.routes[key];\r\n                    }\r\n                }\r\n            },\r\n\r\n            getByAction : function(action) {\r\n                for (var key in this.routes) {\r\n                    if (this.routes.hasOwnProperty(key) && this.routes[key].action === action) {\r\n                        return this.routes[key];\r\n                    }\r\n                }\r\n            },\r\n\r\n            getCorrectUrl: function (uri) {\r\n                var url = this.prefix + '/' + uri.replace(/^\\/?/, '');\r\n\r\n                if(!this.absolute)\r\n                    return url;\r\n\r\n                return this.rootUrl.replace('/\\/?$/', '') + url;\r\n            }\r\n        };\r\n\r\n        var getLinkAttributes = function(attributes) {\r\n            if ( ! attributes) {\r\n                return '';\r\n            }\r\n\r\n            var attrs = [];\r\n            for (var key in attributes) {\r\n                if (attributes.hasOwnProperty(key)) {\r\n                    attrs.push(key + '=\"' + attributes[key] + '\"');\r\n                }\r\n            }\r\n\r\n            return attrs.join(' ');\r\n        };\r\n\r\n        var getHtmlLink = function (url, title, attributes) {\r\n            title      = title || url;\r\n            attributes = getLinkAttributes(attributes);\r\n\r\n            return '<a href=\"' + url + '\" ' + attributes + '>' + title + '</a>';\r\n        };\r\n\r\n        return {\r\n            // Generate a url for a given controller action.\r\n            // laroute.action('HomeController@getIndex', [params = {}])\r\n            action : function (name, parameters) {\r\n                parameters = parameters || {};\r\n\r\n                return routes.route(name, parameters, routes.getByAction(name));\r\n            },\r\n\r\n            // Generate a url for a given named route.\r\n            // laroute.route('routeName', [params = {}])\r\n            route : function (route, parameters) {\r\n                parameters = parameters || {};\r\n\r\n                return routes.route(route, parameters);\r\n            },\r\n\r\n            // Generate a fully qualified URL to the given path.\r\n            // laroute.route('url', [params = {}])\r\n            url : function (route, parameters) {\r\n                parameters = parameters || {};\r\n\r\n                return routes.url(route, parameters);\r\n            },\r\n\r\n            // Generate a html link to the given url.\r\n            // laroute.link_to('foo/bar', [title = url], [attributes = {}])\r\n            link_to : function (url, title, attributes) {\r\n                url = this.url(url);\r\n\r\n                return getHtmlLink(url, title, attributes);\r\n            },\r\n\r\n            // Generate a html link to the given route.\r\n            // laroute.link_to_route('route.name', [title=url], [parameters = {}], [attributes = {}])\r\n            link_to_route : function (route, title, parameters, attributes) {\r\n                var url = this.route(route, parameters);\r\n\r\n                return getHtmlLink(url, title, attributes);\r\n            },\r\n\r\n            // Generate a html link to the given controller action.\r\n            // laroute.link_to_action('HomeController@getIndex', [title=url], [parameters = {}], [attributes = {}])\r\n            link_to_action : function(action, title, parameters, attributes) {\r\n                var url = this.action(action, parameters);\r\n\r\n                return getHtmlLink(url, title, attributes);\r\n            },\r\n\r\n            // Whether we're using absolute URLs or not.\r\n            // laroute.set_absolute(true)\r\n            set_absolute : function (absolute) {\r\n                routes.absolute = absolute;\r\n            },\r\n\r\n            // Set a base url for all routes.\r\n            // laroute.set_root_url('http://localhost')\r\n            set_root_url : function (url) {\r\n                routes.rootUrl = url;\r\n            },\r\n\r\n            // JSON encoded route collection.\r\n            // laroute.set_routes([])\r\n            set_routes : function (json) {\r\n                routes.routes = json;\r\n            },\r\n\r\n            // Add a prefix to all URLs.\r\n            // $NAMEPSACE$.set_prefix('my-prefix')\r\n            set_prefix : function (prefix) {\r\n                routes.prefix = prefix;\r\n            }\r\n\r\n        };\r\n\r\n    }).call(this);\r\n\r\n    /**\r\n     * Expose the class either via AMD, CommonJS or the global object\r\n     */\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(function () {\r\n            return laroute;\r\n        });\r\n    }\r\n    else if (typeof module === 'object' && module.exports){\r\n        module.exports = laroute;\r\n    }\r\n    else {\r\n        window.laroute = laroute;\r\n    }\r\n\r\n}).call(this);\r\n\r\n"]}